<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>BAN監獄</title>
<style>
body { background:#111; color:#eee; font-family:sans-serif; text-align:center; }
.cage {
  width:480px; margin:20px auto; padding:20px;
  border:6px solid #555; border-radius:6px;
  background:#1b1b1b;
  box-shadow:0 0 20px rgba(255,0,0,.3);
}
.banRow { margin:12px 0; padding:10px; background:#222; border:1px solid #444; }
button { margin-left:8px; padding:6px 12px; cursor:pointer; }
</style>
</head>
<body>
<h1>⛓️ BAN監獄 ⛓️</h1>
<div class="cage">
  <h2>収容中のユーザー</h2>
  <div id="banList">読み込み中…</div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
import { getDatabase, ref, onValue, remove } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-database.js";

const firebaseConfig = { ここも index.html と同じ設定 };
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// BAN一覧表示
onValue(ref(db, "bans"), snap => {
  const data = snap.val() || {};
  const list = document.getElementById("banList");
  list.innerHTML = "";

  Object.keys(data).forEach(uid => {
    const div = document.createElement("div");
    div.className = "banRow";
    div.innerHTML = `
      <span>${uid}</span>
      <button class="unbanBtn" data-id="${uid}">解除</button>
    `;
    list.appendChild(div);
  });

  // 解除
  document.querySelectorAll(".unbanBtn").forEach(btn => {
    btn.onclick = async () => {
      const pw = prompt("管理パスワード");
      if (pw !== "master") return alert("パスワードが違うペコ");
      await remove(ref(db, `bans/${btn.dataset.id}`));
      alert("釈放したペコ");
    };
  });
});
</script>
</body>
</html>
